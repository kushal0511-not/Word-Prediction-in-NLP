<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css" rel="stylesheet" />
<link rel="stylesheet" href="{{ url_for('static', filename='style1.css') }}">

<!DOCTYPE html>
<head>
  <script type="text/javascript">
              
    //var formOne = document.getElementById('form1');

    function submitForm(){
        //event.preventDefault(); 
        var edValue = document.getElementById("input");
        var txtInput = edValue.value;
        var len = txtInput.length;
        if(txtInput[len-1]===" "){
            const sub = txtInput.split(" ");
            const Last3=[] ;
            if(sub.length>3){
              for(let i = 0;i<3;i++)
              {
                
                  Last3[i] = sub[sub.length-2-i];
                
              }
            var str = '{"str":"'+Last3[2]+ "_" + Last3[1]+ "_"+ Last3[0]+'"}';
              // Prevent default submit behavior.
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
              console.log(this.status);
              if (this.readyState == 4 && this.status == 200) {
                 document.getElementById("out").innerHTML = xhttp.responseText;
              }
            };
            xhttp.open("POST", "/predict", true);
            xhttp.setRequestHeader('Content-Type', 'application/json');
            //str = str.replace(/^\s+|\s+$/g, "");
            json_str= JSON.parse(str)
            console.log(json_str);
            xhttp.send(JSON.stringify(json_str));
            }  
          }

          //formOne.addEventListener('input', submitForm);


   
          }

    
            </script>
    
</head>
<body>
  <div class="banner">
  <div class="navbar">
                    
    <img src="" alt="">
    <ul>
        <li><a href="/" >Home</a></li>
        <li><a href="#">Models</a></li>
        <li><a href="/about_us">About Us</a></li>

    </ul>
  </div>
  <div style="padding: 10px;
                  
                    background-color: 
                        rgba(135, 206, 235, 0.5);
                  height: 800px;">

            <h4 style="text-align: center;">Natural Language Proccessing</h2>
            <h1 class="display-1" style="color: green;text-align: center;">Next Word Prediction</h1>
              
              <div style="display:flex;justify-content:center;" >
                <h4  id="out" style="display:flex;justify-content: center;background-color: aqua;font-size: larger;text-align: center;"></h4>
              </div>
              
              <div class="form-group">
                <textarea class="form-control" name="predict" onkeyup="submitForm()"  id="input" rows="3"></textarea>
              </div>     
              
            
        </div>
        </div>   
           
           
          
    </body>